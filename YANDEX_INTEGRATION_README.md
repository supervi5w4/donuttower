# Интеграция SDK Яндекс Игр в DonutTower

## Что было добавлено

### 1. SDK Яндекс Игр
- **Файл**: `scripts/YandexSDK.gd` - основной скрипт для работы с SDK
- **Функции**:
  - `show_interstitial()` - показывает Interstitial рекламу (не чаще 50 сек)
  - `show_rewarded()` - показывает Rewarded рекламу для продолжения игры
  - Автоматическая инициализация SDK при запуске на веб-платформе

### 2. Интеграция в игровую логику
- **Interstitial реклама**: показывается автоматически при Game Over
- **Rewarded реклама**: показывается при нажатии кнопки "Continue (Watch Ad)"
- **Ограничения**: 
  - Interstitial не чаще 50 секунд
  - Continue доступен только 1 раз за попытку
  - При ошибках рекламы игра продолжается бесплатно

### 3. HTML шаблон для Яндекс Игр
- **Файл**: `export_templates/web/yandex_games_template.html`
- Автоматическая загрузка и инициализация SDK Яндекс Игр
- Совместимость с Godot 4.4.1

### 4. Настройки экспорта
- **Файл**: `export_presets.cfg` - пресет для экспорта в Яндекс Игры
- Использует кастомный HTML шаблон

## Как использовать

### Экспорт игры
1. Откройте проект в Godot 4.4.1
2. Перейдите в Project → Export
3. Выберите пресет "Yandex Games"
4. Нажмите "Export Project"
5. Загрузите полученные файлы на Яндекс Игры

### Тестирование
- В редакторе Godot реклама не показывается (не веб-платформа)
- При экспорте в HTML5 реклама будет работать на Яндекс Играх
- В консоли браузера будут видны логи работы с SDK

## Технические детали

### Сигналы YandexSDK
- `interstitial_closed(was_shown: bool)` - Interstitial реклама закрыта
- `rewarded_completed()` - Rewarded реклама завершена, награда получена
- `rewarded_closed()` - Rewarded реклама закрыта
- `ad_error(error_message: String)` - ошибка при показе рекламы

### Обработка ошибок
- При недоступности SDK игра работает без рекламы
- При ошибках Rewarded рекламы продолжение дается бесплатно
- Все ошибки логируются в консоль

### Совместимость
- Работает только на веб-платформе (HTML5)
- Совместимо с Godot 4.4.1
- Использует JavaScriptBridge для взаимодействия с SDK

## Файлы проекта

### Новые файлы:
- `scripts/YandexSDK.gd` - скрипт SDK
- `export_templates/web/yandex_games_template.html` - HTML шаблон
- `export_presets.cfg` - настройки экспорта
- `YANDEX_INTEGRATION_README.md` - эта документация

### Измененные файлы:
- `scripts/Game.gd` - добавлена интеграция с рекламой
- `scenes/Game.tscn` - добавлен узел YandexSDK, изменен текст кнопки Continue

## Требования Яндекс Игр

✅ **Interstitial реклама**: показывается при Game Over, не чаще 50 секунд  
✅ **Rewarded реклама**: показывается по кнопке Continue, 1 раз за попытку  
✅ **Пауза игры**: автоматически ставится при показе рекламы  
✅ **Обработка ошибок**: корректная обработка недоступности рекламы  
✅ **Пользовательский опыт**: четкое указание на просмотр рекламы за награду
