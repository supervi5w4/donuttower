# Инструкции по тестированию языков

## Исправленные проблемы

1. **Дублирующиеся переводы**: Удалены дублирующиеся записи `ui.gameover.title` в файле `ui_en.po`
2. **Логика определения языка**: Улучшена логика определения языка браузера с fallback на английский для веб-платформы
3. **Локаль по умолчанию**: Изменена локаль по умолчанию в `project.godot` с `ru` на `en`

## Как протестировать

### 1. Тестирование в браузере

1. **Английский браузер**:
   - Откройте игру в браузере с английским языком
   - Игра должна автоматически запуститься с английским интерфейсом
   - Проверьте, что все тексты отображаются на английском

2. **Русский браузер**:
   - Откройте игру в браузере с русским языком
   - Игра должна автоматически запуститься с русским интерфейсом
   - Проверьте, что все тексты отображаются на русском

### 2. Тестирование переключения языков

1. В игре найдите кнопку переключения языка (обычно в меню)
2. Нажмите на неё несколько раз
3. Убедитесь, что интерфейс переключается между русским и английским

### 3. Проверка логов

В консоли браузера должны появиться логи:
```
LanguageManager: инициализация...
LanguageManager: загружаем переводы...
LanguageManager: загружен перевод: ru
LanguageManager: загружен перевод: en
LanguageManager: переводы загружены, доступные локали: ["ru", "en"]
LanguageManager: проверяем платформу...
LanguageManager: OS.has_feature('web') = true
LanguageManager: OS.get_name() = Web
LanguageManager: JavaScript проверка веб-платформы = 1
LanguageManager: начинаем определение языка браузера...
LanguageManager: определение языка браузера...
LanguageManager: navigator.language = en (или ru)
LanguageManager: извлеченный код языка = en (или ru)
LanguageManager: найден поддерживаемый язык = en (или ru)
LanguageManager: JavaScript вернул язык: en (или ru)
LanguageManager: определен язык браузера: en (или ru)
LanguageManager: установлен язык: en (или ru)
LanguageManager: текущая локаль TranslationServer: en (или ru)
LanguageManager: инициализация завершена, текущий язык: en (или ru)
```

## Ожидаемое поведение

- **Английский браузер**: игра запускается с английским интерфейсом
- **Русский браузер**: игра запускается с русским интерфейсом
- **Другие языки**: игра запускается с английским интерфейсом (fallback)
- **Переключение языков**: работает корректно в обе стороны

## Файлы, которые были изменены

1. `i18n/ui_en.po` - удалены дублирующиеся переводы
2. `scripts/LanguageManager.gd` - улучшена логика определения языка
3. `project.godot` - изменена локаль по умолчанию на английский
4. `scripts/LanguageTest.gd` - создан тестовый скрипт (опционально)
