# Тестирование функции "Дополнительная жизнь"

## Проблема
Кнопка "Дополнительная жизнь" пропала из меню проигрыша.

## Решение
Восстановлена функциональность кнопки "Дополнительная жизнь" в GameOverPanel.gd.

## Что было исправлено

### 1. GameOverPanel.gd
- ✅ Добавлено программное создание кнопки, если её нет в сцене
- ✅ Исправлена логика отображения кнопки при проигрыше
- ✅ Добавлена отладочная информация для диагностики

### 2. Game.gd  
- ✅ Добавлен вызов `_show_lose_panel()` в функцию `_set_game_over()`
- ✅ Исправлена передача параметров в GameOverPanel

## Как тестировать

### Способ 1: В игре
1. Запустите игру
2. Проиграйте уровень (дайте пончику упасть)
3. В меню проигрыша должна появиться кнопка "Дополнительная жизнь"

### Способ 2: Тестовый скрипт
1. Откройте сцену `scenes/TestExtraLife.tscn`
2. Запустите сцену
3. Нажмите кнопку "Тест GameOverPanel"
4. Проверьте консоль на наличие отладочных сообщений

## Отладочные сообщения

В консоли должны появиться следующие сообщения:

```
GameOverPanel: Создаем кнопку дополнительной жизни программно...
GameOverPanel: Кнопка дополнительной жизни создана и настроена
GameOverPanel: show_game_over вызван с параметрами: score=100, is_win=false, ...
Кнопка дополнительной жизни: visible = true (is_win = false, ENABLE_ADS_RETRY = true)
```

## Структура меню проигрыша

После исправления меню должно выглядеть так:

```
┌─────────────────────────────────┐
│        Игра окончена           │
│                                │
│    [Дополнительная жизнь]      │  ← Эта кнопка должна появиться
│         [Меню]                 │
└─────────────────────────────────┘
```

## Возможные проблемы

1. **Кнопка все еще не появляется**
   - Проверьте консоль на наличие ошибок
   - Убедитесь, что `ENABLE_ADS_RETRY = true`
   - Проверьте, что игра действительно проиграна (не выиграна)

2. **Ошибки в консоли**
   - Проверьте, что GameOverPanel.gd загружается без ошибок
   - Убедитесь, что все необходимые узлы существуют в сцене

3. **Кнопка появляется, но не работает**
   - Проверьте, что YandexSDK подключен
   - Убедитесь, что сигнал `_on_ads_pressed` подключен

## Файлы для проверки

- `ui/GameOverPanel.gd` - основная логика кнопки
- `scripts/Game.gd` - вызов GameOverPanel
- `scripts/TestExtraLife.gd` - тестовый скрипт
- `scenes/TestExtraLife.tscn` - тестовая сцена
